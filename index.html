<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>NutriFind ‚Äì Nutrition Facts & Calorie Checker</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üç™</text></svg>">
<style>
    /* ------------------ LIGHT / DARK MODE GLOBAL ------------------ */
    :root {
        --bg: #f5f7f8;
        --text: #222;
        --card-bg: #fff;
        --subtitle: #555;
        --table-border: #ccc;
        --table-text: #111;
    }

    body.dark {
        --bg: #121212;
        --text: #e6e6e6;
        --card-bg: #1e1e1e;
        --subtitle: #aaa;
        --table-border: #444;
        --table-text: #eee;
    }

    body {
        font-family: Arial, sans-serif;
        background: var(--bg);
        margin: 0;
        padding: 0;
        color: var(--text);
        line-height: 1.6;
        transition: background 0.3s, color 0.3s;
    }

    /* ------------------ HEADER ------------------ */
    header {
        text-align: center;
        padding: 30px 20px 10px;
    }
    header img {
        width: 50px;
        margin-bottom: 5px;
    }
    header h1 {
        font-size: 32px;
        margin: 5px 0 10px;
    }
    .subtitle {
        font-size: 15px;
        color: var(--subtitle);
        margin-bottom: 20px;
    }

    /* ------------------ FORM SECTION ------------------ */
    .container {
        max-width: 600px;
        margin: auto;
        padding: 0 20px 40px;
    }

    .input-group {
        margin-bottom: 15px;
        display: flex;
        flex-direction: column;
    }

    input, select {
        padding: 12px;
        font-size: 16px;
        border: 1px solid var(--table-border);
        border-radius: 6px;
        width: 100%;
        background: var(--card-bg);
        color: var(--text);
        box-sizing: border-box;
        transition: background 0.3s, color 0.3s, border 0.3s;
    }

    /* ------------------ NUTRITION CARD ------------------ */
    .card {
        background: var(--card-bg);
        padding: 25px;
        border-radius: 12px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        margin-top: 25px;
        transition: background 0.3s;
    }

    .card h2 {
        text-align: center;
        margin-bottom: 10px;
    }

    .divider {
        height: 3px;
        background: #2e7d32;
        margin: 10px 0 20px;
    }

    /* TABLE + BORDERS RESTORED */
    table {
        width: 100%;
        font-size: 16px;
        border-collapse: collapse;
    }

    table tr {
        border-bottom: 1px solid var(--table-border);
    }

    table td {
        padding: 6px 0;
        color: var(--table-text);
    }

    table td:last-child {
        text-align: right;
    }

    .serving-note {
        margin-top: 12px;
        text-align: center;
        font-size: 13px;
        color: #777;
    }
    body.dark .serving-note { color: #bbb; }

    .message {
      background: #fff3cd;
      color: #856404;
      border: 1px solid #ffeeba;
      padding: 10px 12px;
      border-radius: 6px;
      margin-bottom: 12px;
    }

    /* ------------------ ABOUT SECTION ------------------ */
    .about-section {
        max-width: 700px;
        margin: 40px auto;
        padding: 0 20px 50px;
    }

    .about-section h2 {
        color: #0a7c36;
        margin-top: 40px;
        margin-bottom: 10px;
        text-align: left;
    }

    .about-section p {
        text-align: left;
        margin: 0 0 18px;
        color: var(--text);
    }

    /* ------------------ FOOTER ------------------ */
    footer {
        text-align: center;
        padding: 20px;
        font-size: 13px;
        color: #777;
    }
    body.dark footer { color: #aaa; }

    /* ------------------ GRID LAYOUT (unchanged) ------------------ */
    @media (min-width: 800px) {
      .grid-row { display: grid; grid-template-columns: 1fr 120px 160px; gap:12px; align-items:start; }
      .input-group { margin-bottom: 0; }
    }

    /* ------------------ DARK MODE TOGGLE BUTTON ------------------ */
    .dark-toggle {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background: var(--card-bg);
        border: 1px solid var(--table-border);
        width: 45px;
        height: 45px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        box-shadow: 0 2px 6px rgba(0,0,0,0.15);
        transition: background 0.3s, border 0.3s, transform 0.2s;
        font-size: 20px;
    }
    .dark-toggle:hover {
        transform: scale(1.08);
    }
</style>
</head>

<body>

<header>
    <img src="https://cdn-icons-png.flaticon.com/512/1047/1047711.png" alt="Logo">
    <h1>NutriFind</h1>
    <div class="subtitle">Instantly search calories, macros, and nutrition facts.</div>
</header>

<!-- FORM -->
<div class="container">

    <div id="messageContainer" style="display:none"></div>

    <div class="grid-row" style="margin-bottom:12px;">
      <div class="input-group">
        <input type="text" id="foodInput" placeholder="Search any food (e.g., apple, chicken breast)">
      </div>

      <div class="input-group">
        <input type="number" id="amountInput" placeholder="Amount" value="100" min="1">
      </div>

      <div class="input-group">
        <select id="unitSelect">
            <option value="g">Grams (g)</option>
            <option value="kg">Kilograms (kg)</option>
            <option value="oz">Ounces (oz)</option>
            <option value="lb">Pounds (lb)</option>
            <option value="cup">Cups</option>
            <option value="tbsp">Tablespoons</option>
            <option value="tsp">Teaspoons</option>
            <option value="piece">Piece</option>
        </select>
      </div>
    </div>

    <div class="card" id="resultsCard" style="display:none;">
        <h2>Nutrition Facts</h2>
        <div class="divider"></div>
        <table id="nutritionTable" aria-live="polite"></table>
        <div class="serving-note" id="servingNote"></div>
    </div>

</div>

<!-- ABOUT SECTION -->
<div class="about-section">

    <h2>What is NutriFind?</h2>
    <p>
        NutriFind is a fast nutrition checker that lets you search any food and instantly see calories, macros, and nutrition facts. It supports serving sizes like grams, cups, tablespoons, teaspoons, ounces, and pieces.
    </p>

    <h2>How to Use the Nutrition Calculator</h2>
    <p>
        Type any food into the search bar ‚Äî for example: <strong>egg, apple, fried rice,</strong> or <strong>chicken breast</strong>. Then choose your desired amount and unit. NutriFind automatically converts the serving size into grams for accurate results.
    </p>

    <h2>Privacy & Terms</h2>
    <p>
        NutriFind does not store your personal data. Searches are anonymous and processed only to retrieve nutrition results. By using this site, you agree that the information is for general purposes only and may vary based on preparation, brand, or cooking method.
    </p>

</div>

<footer>
    Powered by CalorieNinjas API. NutriFind ¬© 2025
</footer>

<!-- DARK MODE TOGGLE -->
<div class="dark-toggle" id="darkToggle">üåô</div>

<script>
/* ============================================================
   DARK MODE
============================================================ */
const darkToggle = document.getElementById('darkToggle');

darkToggle.addEventListener('click', () => {
    document.body.classList.toggle('dark');

    // swap icon depending on mode
    darkToggle.textContent = document.body.classList.contains('dark')
        ? "‚òÄÔ∏è"
        : "üåô";
});

/* ============================================================
   EXISTING NUTRITION LOGIC ‚Äî unchanged
============================================================ */
const API_KEY = ""; 
const foodInput = document.getElementById('foodInput');
const amountInput = document.getElementById('amountInput');
const unitSelect = document.getElementById('unitSelect');
const resultsCard = document.getElementById('resultsCard');
const nutritionTable = document.getElementById('nutritionTable');
const servingNote = document.getElementById('servingNote');
const messageContainer = document.getElementById('messageContainer');

let debounceTimer = null;

function showMessage(text){
  messageContainer.style.display = 'block';
  messageContainer.className = 'message';
  messageContainer.innerText = text;
  setTimeout(()=>{ messageContainer.style.display = 'none'; }, 6000);
}

function convertToGrams(name, qty, unit) {
  const lookup = {
    "apple": { piece: 182 },
    "banana": { piece: 118 },
    "egg": { piece: 50 },
    "rice cooked": { cup: 158 }
  };
  const food = lookup[name.toLowerCase()];
  const cup = 240, tbsp = 15, tsp = 5, oz = 28.35;

  if (unit === 'g' || unit === 'ml') return qty;
  if (unit === 'kg') return qty * 1000;
  if (unit === 'oz') return qty * oz;
  if (unit === 'lb') return qty * 453.592;
  if (unit === 'cup') return qty * (food?.cup || cup);
  if (unit === 'tbsp') return qty * tbsp;
  if (unit === 'tsp') return qty * tsp;
  if (unit === 'piece') return qty * (food?.piece || 100);
  return qty * 100;
}

async function getNutritionFromApi(query) {
  if (API_KEY) {
    const url = `https://api.calorieninjas.com/v1/nutrition?query=${encodeURIComponent(query)}`;
    const res = await fetch(url, { headers: { 'X-Api-Key': API_KEY } });
    if (!res.ok) throw new Error(`API error ${res.status}`);
    return await res.json();
  }

  const localUrl = `/api/nutrition?query=${encodeURIComponent(query)}`;
  const res = await fetch(localUrl);
  if (!res.ok) throw new Error(`Local API error ${res.status}`);
  return await res.json();
}

async function fetchNutrition(){
  const food = foodInput.value.trim();
  const amount = parseFloat(amountInput.value) || 0;
  const unit = unitSelect.value;

  if (!food || amount <= 0) {
    resultsCard.style.display = 'none';
    return;
  }

  const queryText = `${amount} ${unit} ${food}`;

  try {
    nutritionTable.innerHTML = '<tr><td>Loading‚Ä¶</td><td></td></tr>';
    resultsCard.style.display = 'block';

    const data = await getNutritionFromApi(queryText);

    if (!data || !data.items || data.items.length === 0) {
      nutritionTable.innerHTML = '<tr><td>No results found.</td><td></td></tr>';
      return;
    }

    const item = data.items[0];
    const grams = convertToGrams(item.name || food, amount, unit);

    function val(key, fallback='0'){
      return (item[key] ?? fallback);
    }

    nutritionTable.innerHTML = `
      <tr><td><strong>Calories</strong></td><td><strong>${val('calories')}</strong></td></tr>
      <tr><td>Fat</td><td>${val('fat_total_g')} g</td></tr>
      <tr><td>Sodium</td><td>${val('sodium_mg')} mg</td></tr>
      <tr><td>Carbs</td><td>${val('carbohydrates_total_g')} g</td></tr>
      <tr><td>Fiber</td><td>${val('fiber_g')} g</td></tr>
      <tr><td>Sugar</td><td>${val('sugar_g')} g</td></tr>
      <tr><td>Protein</td><td>${val('protein_g')} g</td></tr>
    `;

    servingNote.innerText = `Serving: ${amount} ${unit} ‚Üí approx. ${Math.round(grams)} g`;

  } catch (err) {
    console.error(err);
    messageContainer.style.display = 'block';
    messageContainer.className = 'message';
    messageContainer.innerText = "Error fetching data: " + err.message;
  }
}

function scheduleFetch(){
  clearTimeout(debounceTimer);
  debounceTimer = setTimeout(fetchNutrition, 500);
}

foodInput.addEventListener('input', scheduleFetch);
amountInput.addEventListener('input', scheduleFetch);
unitSelect.addEventListener('change', scheduleFetch);

window.addEventListener('load', ()=>{
  
    
});
</script>

</body>
</html>



